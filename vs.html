<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Expires" content="-1">
	    <meta name="description" content="JNE-VS">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>CODESUYO VOTO 2016</title>
		<link rel="icon" type="image/png" href="http://jne.drupal.com.pe/sites/default/files/loguito.png">
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/jasny-bootstrap.min.css">
		<link rel="stylesheet" href="css/navmenu-reveal.css">
		<link rel="stylesheet" href="css/codesuyo-jne.css">
	    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
	    <!-- <link rel="stylesheet" type="text/css" href="css/animate.css">-->
	    <style type="text/css">
		    body{
		    	font: normal 15px 'Open Sans', sans-serif, Courier, monospace;
		    }
	    	.red{
				height: 220px;
				background: #C92828;
				padding: 15px;
				overflow: hidden;
	    	}
	    	.blue{
				height: 220px;
				background: #286090;
				padding: 15px;
				overflow: hidden;
	    	}
	    	.red-l{
	    		height: 110px;
	    		background: rgba(255, 0, 0, 0.35);
	    		margin-top: 55px;
	    		width: 55%;
	    	}
	    	.blue-l{
	    		height: 110px;
	    		background: rgba(40, 96, 144, 0.35);
	    		margin-top: 55px;
	    		width: 55%;
	    	}
	    	.circle{
				border-radius: 50%;
				width: 50px;
				height: 50px;
	    		text-align: center;
	    		background: #337ab7;
	    		color: #FFF;
	    		padding-top: 12px;
				position: absolute;
				top: 88px;
				cursor: pointer;
	    	}
	    	.circle-vs{
				border-radius: 50%;
				width: 50px;
				height: 50px;
	    		text-align: center;
	    		background: #000;
	    		color: #FFF;
	    		padding-top: 12px;
				cursor: pointer;
	    	}
	    	.text-partido{
				font-size: 1.1em;
				color: #FFF;
				display: block;
			    margin-bottom: 7px;
	    	}
	    	.img-partido{
	    		height: 150px;
    		    display: block;
    			margin-right: auto;
    			margin-left: auto;
	    	}
	    	@media (max-width: 768px) {
		    	.text-partido{
					font-size: 0.85em;
		    	}
	    	}
	    	.panel-img-partido{
	    		overflow: hidden;
	    		height: 150px;
	    	}
	    	.img-partido-left{
				position: absolute;
				left: -100%;
				visibility: hidden;
	    	}
	    	.img-partido-right{
				position: absolute;
				left: 100%;
				visibility: hidden;
	    	}
	    	.header-vs{
	    		background: #777;	
	    		color: #FFf;
	    	}
	    	.text-vs{
				color: #C92828;
	    	}
	    	h3{
	    		margin-top: 20px;
				margin-bottom: 20px;
	    	}
	    	.panel-default>.panel-heading, .panel-default>.panel-footer {
	    		background: #286090;
	    	}
	    	.nav-tabs {
			    border: none;
			}
	    	.nav-tabs>li>a{
				background: transparent;
			    color: #FFF;
			    border: none;
			    font-size: 0.85em;
	    	}
	    	.nav-tabs>li.active>a,.nav-tabs>li.active>a:hover{
				background: transparent;
			    color: #FFF;
			    border: none;
			    border-bottom: 3px solid #5bc0de;
	    	}
	    	.nav>li>a:hover {
				text-decoration: none;
				background-color: transparent;
			    border-bottom: 3px solid #FFF;
			}
	    	.nav>li>a {
				padding: 7px 10px;
			}
	    </style>
	</head>
	<body>
		<nav id="navMenuLeft" class="navmenu navmenu-default navmenu-fixed-left offcanvas" role="navigation">
			<a class="navmenu-brand" href="index.html">VOTO INFORMADO 2016</a>
			<ul class="nav navmenu-nav">
		        <li><a href="candidatos.html">Candidatos</a></li>
	        <li><a href="vs.html">Comparar</a></li>
	        <li><a href="feed_view.html">Noticias</a></li>
	        <li><a href="encuesta.html">Encuestas</a></li>
	        <li><a href="acercade.html">Acerca De</a></li>
		     </ul>
		</nav>
		<div class="canvas">
			<nav class="navbar navbar-default navbar-fixed-top">
			  	<button id="btnMenuTop" type="button" class="navbar-toggle" data-toggle="offcanvas" data-target="#navMenuLeft" data-canvas="body">
			    	<span class="glyphicon glyphicon-menu-hamburger"></span>
			  	</button>
			  	<p class="text-center text-tittle" >ELECCIONES PERÚ 2016</p>
			</nav>
			<div class="container" id="contenedor">
				<div class="col-xs-12 col-sm-12">
					<br>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-5">
					<div class="col-xs-2 col-sm-2">
						<div class="row">
							<div class="red-l pull-right">
							</div>
							<div class="circle ctrl-left">
								<i class="fa fa-reply fa-2x"></i>
							</div>
						</div>
					</div>
					<div class="col-xs-8 col-sm-8 red text-center">
						<span class="text-partido"></span>
						<div class="panel-img-partido-one">
						</div>
					</div>
					<div class="col-xs-2 col-sm-2">
						<div class="row">
							<div class="red-l pull-left">
							</div>
							<div class="circle ctrl-right">
								<i class="fa fa-share fa-2x"></i>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-2">
					<div class="hidden-sm-up">
						<div class="clearfix"></div>
						<br>
					</div>
					<div class="col-xs-12 col-sm-12">
						<div class="center-block circle-vs">
							<i class="fa fa-compress fa-2x"></i>
						</div>
					</div>
					<div class="hidden-sm-up">
						<div class="clearfix"></div>
						<br>
					</div>
				</div>
				<div class="col-xs-12 col-sm-12 col-md-5">
					<div class="col-xs-2 col-sm-2">
						<div class="row">
							<div class="blue-l pull-right">
							</div>
							<div class="circle ctrl-left">
								<i class="fa fa-reply fa-2x"></i>
							</div>
						</div>
					</div>
					<div class="col-xs-8 col-sm-8 blue text-center">
						<span class="text-partido"></span>
						<div class="panel-img-partido-two">
						</div>
					</div>
					<div class="col-xs-2 col-sm-2">
						<div class="row">
							<div class="blue-l pull-left">
							</div>
							<div class="circle ctrl-right">
								<i class="fa fa-share fa-2x"></i>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xs-12 col-sm-12">
					<br>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="js/jasny-bootstrap.min.js"></script>
	<script type="text/javascript" src="js/bootstrap-notify.min.js"></script>
	<script type="text/javascript">
		$(window).resize(function(){
			$('.ctrl-left').css({left: ($('.ctrl-left').parent().width() - ($('.ctrl-left').prev().width() + $('.ctrl-left').width()/2))});
			$('.ctrl-right').css({left: ($('.ctrl-right').prev().width() - $('.ctrl-right').width() / 2 )});
		})
		$(document).ready(function(){
			$.ajax({
				type: 'POST',
				url: 'http://codesuyo.esy.es/action/Listado.php',
				data: "{}",
				success: function (data) {
					data = JSON.parse(data);
					$('.panel-img-partido-one').append('<img class="img-responsive img-thumbnail img-partido img-partido-left" id="' + (data.length-1) + '" src="' + data[(data.length-1)].logo_partido + '" /><img class="img-responsive img-thumbnail img-partido img-partido-right" id="1" src="' + data[1].logo_partido + '" /><img class="img-responsive img-thumbnail img-partido" id="0" src="' + data[0].logo_partido + '" />');
					$('.panel-img-partido-one').prev().html(data[0].nombre_partido);

					$('.panel-img-partido-two').append('<img class="img-responsive img-thumbnail img-partido img-partido-left" id="0" src="' + data[0].logo_partido + '" /><img class="img-responsive img-thumbnail img-partido img-partido-right" id="2" src="' + data[2].logo_partido + '" /><img class="img-responsive img-thumbnail img-partido" id="1" src="' + data[1].logo_partido + '" />');
					$('.panel-img-partido-two').prev().html(data[1].nombre_partido);
					datos = data;
					ctrl_one = true;
					ctrl_two = true;
					ctrl_vs = true;
					$('.ctrl-left').css({left: ($('.ctrl-left').parent().width() - ($('.ctrl-left').prev().width() + $('.ctrl-left').width()/2))});
					$('.ctrl-right').css({left: ($('.ctrl-right').prev().width() - $('.ctrl-right').width() / 2 )});

					$('.ctrl-left').click( function(){
						var parent_img = '.' + $($(this).parent().parent().next().children()[1]).attr("class");
						if(ctrl_one){
							ctrl_one = false;
							$(parent_img + ' > .img-partido-left').animate({
								left: "9%"
							}, 'fast', function() {
								$(parent_img + ' > .img-partido-left').removeClass('img-partido-left');
								$(parent_img + ' > .img-partido-right').removeClass('img-partido-right');
								$($(parent_img + ' > .img-partido')[1]).addClass('img-partido-left');
								$($(parent_img + ' > .img-partido')[2]).addClass('img-partido-right');
								$(parent_img + '').prepend( $($(parent_img + ' > .img-partido')[2]) );
								$(parent_img + '').prepend( $($(parent_img + ' > .img-partido')[2]) );
								var id = parseInt($($(parent_img + ' > .img-partido')[2]).attr('id'));
								$(parent_img).prev().html(datos[id].nombre_partido);
								if( id === 0){
									id = datos.length-1;
								}
								$(parent_img + ' > .img-partido-left').attr('src',datos[id-1].logo_partido);
								$(parent_img + ' > .img-partido-left').attr('id',id-1);
								ctrl_one = true;
							});
						}
					})
					$('.ctrl-right').click( function(){
						var parent_img = $($(this).parent().parent().prev().children()[1]).attr("class");
						if(ctrl_two){
							ctrl_two = false;
							$('.' + parent_img + ' > .img-partido-right').animate({
								left: "9%"
							}, 'fast', function() {
								$('.' + parent_img + ' > .img-partido-left').removeClass('img-partido-left');
								$('.' + parent_img + ' > .img-partido-right').removeClass('img-partido-right');
								$($('.' + parent_img + ' > .img-partido')[2]).addClass('img-partido-left');
								$($('.' + parent_img + ' > .img-partido')[0]).addClass('img-partido-right');
								$('.' + parent_img + '').prepend( $($('.' + parent_img + ' > .img-partido')[2]) );
								var id = parseInt($($('.' + parent_img + ' > .img-partido')[2]).attr('id'));
								$('.' + parent_img).prev().html(datos[id].nombre_partido);
								if( id === datos.length-1){
									id = -1;
								}
								$('.' + parent_img + ' > .img-partido-right').attr('src',datos[id+1].logo_partido);
								$('.' + parent_img + ' > .img-partido-right').attr('id',id+1);
								ctrl_two = true;
							});
						}
					});
					$('.circle-vs').click( function(){
						var id_par1 = $($('.panel-img-partido-one > .img-partido')[2]).attr('id');
						var id_par2 = $($('.panel-img-partido-two > .img-partido')[2]).attr('id');
						if(ctrl_vs){
							ctrl_vs = false;
							if(id_par1 === id_par2){
								// usar notification boostrap
								nt('No se puede comparar el mismo partido !!', 'danger', 'glyphicon glyphicon-ok', 1525);
							} else {
					//location = location.protocol + '//' + location.host + '/JNE/vspp.html?a=' + (parseInt(id_par1) + 1) + '&b=' + (parseInt(id_par2) + 1);
								
								document.location.href = "vspp.html?a="+ (parseInt(id_par1) + 1) + '&b=' + (parseInt(id_par2) + 1);
								
								console.log(location);
							}
							ctrl_vs = true;
						}
					});
				},
				error: function() { alert("No se encontraron dashboard generados"); }
			});
		});
		function nt(message, type, icon, delay) {
		    $.notify({
		        icon: icon,
		        message: message
		    }, {
		        type: type,
		        element: 'body',
		        placement: {
		            from: "bottom",
		            align: "left"
		        },
		        offset: 20,
		        delay: delay,
		        mouse_over: 'pause',
		        animate: {
		            enter: 'animated fadeInDown',
		            exit: 'animated fadeOutUp'
		        },
		        template: '<div data-notify="container" class="col-xs-10 col-sm-3 alert alert-{0}" role="alert">' +
		                '<button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button>' +
		                '<span data-notify="icon"></span> ' +
		                '<span data-notify="title">{1}</span> ' +
		                '<strong data-notify="message">{2}</strong>' +
		                '<div class="progress" data-notify="progressbar">' +
		                '<div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>' +
		                '</div>' +
		                '<a href="{3}" target="{4}" data-notify="url"></a>' +
		                '</div>'
		    });
		}
	</script>
</html>